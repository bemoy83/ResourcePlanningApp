datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum EventStatus {
  ACTIVE
  ARCHIVED
}

model Event {
  id        String      @id @default(uuid())
  name      String
  startDate DateTime
  endDate   DateTime
  status    EventStatus

  phases EventPhase[] // ðŸ‘ˆ ADD THIS LINE
}

/// Additional event phase ranges beyond Event.startDate/endDate.
/// Dates are manually set and never auto-derived.
model EventPhase {
  id        String   @id @default(uuid())
  eventId   String
  name      String
  startDate DateTime
  endDate   DateTime

  event Event @relation(fields: [eventId], references: [id])

  @@index([eventId])
}

model WorkCategory {
  id                   String @id @default(uuid())
  eventId              String
  name                 String
  estimatedEffortHours Float
}

model Allocation {
  id             String @id @default(uuid())
  eventId        String
  workCategoryId String
  date           String
  effortHours    Float
}

model DailyCapacity {
  id            String @id @default(uuid())
  eventId       String
  date          String
  capacityHours Float

  @@unique([eventId, date])
}

model Location {
  id   String @id @default(uuid())
  name String @unique
}

model EventLocation {
  id         String @id @default(uuid())
  eventId    String
  locationId String

  @@unique([eventId, locationId])
}
